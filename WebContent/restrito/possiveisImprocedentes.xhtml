<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<title>Gestor de Turno</title>
	<link rel="stylesheet" type="text/css" href="../styles/possiveisImprocedentes.css" />
	<link rel="icon" type="image/png" href="../resources/img/pageIcon.png"/> 
	
	<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin="anonymous"/>
	<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin="anonymous"/>
	<script src="https://unpkg.com/@babel/standalone/babel.min.js"/>	
</h:head>
<h:body>

	<p:growl id="msg" showDetail="true" autoUpdate="true" closable="true"
		life="800"
		style="position: fixed; top: 20px; right: 20px; width: 350px; z-index: 9999;"
		sticky="true" />

	<h:form id="formGestor">
	
		<div id="menu_titulo">

			<a href="#{request.contextPath}/restrito/home.jsf" id="titulo"
				title="Ir para página inicial"
				style="text-decoration: none; display: flex; flex-direction: row; justify-content: center; align-items: center; gap: 16px;">

				<p:graphicImage url="../resources/img/home.png"
					style="max-width: 40px; max-height: 40px;" /> <span
				style="color: white; font-size: 1.2em;"> Equatorial Energia</span>
			</a>

			<h1 id="logo">Possíveis Improcedentes</h1>
		</div>
		
		<p:poll interval="60" update="@form" />
		
		<div class="conteudo-improcedentes" id="conteudo_tabela">
			
			<h3 style="margin-top: 8em;" id="hora">Última atualização: #{improcedentes.ultimaAtualizacao}</h3>
			
			<p:dataTable value="#{improcedentes.improcedentesEntidade}" var="improcedentes"
			id="tabela" resizableColumns="true" style="width :80%; font-size: 12px">
				
				<p:column width="10%">
					<f:facet name="header">Ocorrência</f:facet>
					<h:outputText value="#{improcedentes.ocorrencia}" />
				</p:column>
				
				<p:column width="15%">
					<f:facet name="header">Motivo da Solicitação</f:facet>
					<h:outputText value="#{improcedentes.motivoSolicitacao}" />
				</p:column>
				
				<p:column width="60%">
					<f:facet name="header">Informações Adicionais</f:facet>
					<h:outputText value="#{improcedentes.informacoesAdicionais}" 
					style="white-space: normal; word-wrap: break-word; overflow-wrap: break-word;"/>
				</p:column>
			</p:dataTable>
		</div>
	</h:form>
</h:body>
</html>